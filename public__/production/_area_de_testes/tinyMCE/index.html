<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">

    <script src="tinymce/tinymce.min.js"></script>

    <link href="prism.css" rel="stylesheet">
    
    <script src="prism.js"></script>

    <style>
        * {
            box-sizing: border-box;
        }
        .result {
            width: 100%;
            height: auto;
            border: solid thin #dedede;
            padding: 2em;
        }
    </style>
</head>
<body>
    <main class="container">
        <h1>TinyMCE</h1>
        <div class="form-floating">
            <textarea id="editor" class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea>
            <label for="floatingTextarea2">Comments</label>
        </div>     
        <button class="btn btn-secondary mt-4 clear-btn">Limpar</button>
        <button class="btn btn-primary mt-4 tosave-btn">Salvar</button>
        <div class="row mt-4">
            <div class="col-lg-4 col-md-4">
                <p>teste de conteudo em duas colunas para testar o comportamento da coluna que contém o conteúdo do editor tinyMCE.</p>
            </div>
            <div class="col-lg-8 col-md-8">
                <div class="result">&nbsp;</div> 
            </div>
        </div> 
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let _data = '';
             // TinyMCE
            tinymce.init({
                selector: '#editor',
                menubar:false,
                language: 'pt_BR',
                placeholder: 'Insira aqui seu trecho de código',
                height: 500,
                branding: false,
                plugins: [
                    'advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview',
                    'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen',
                    'insertdatetime', 'media', 'table', 'help', 'wordcount', 'codesample', 'fullscreen'
                ],
                toolbar_mode: 'sliding',
                toolbar1:'undo redo | blocks | ' +
                'bold italic backcolor | alignleft aligncenter ' +
                'alignright alignjustify | bullist numlist outdent indent | ' +
                'removeformat |   |' + ' codesample |   | link image | help',
                content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:16px }',
                codesample_languages: [
                    {text: 'HTML/XML', value: 'markup'},
                    {text: 'JavaScript', value: 'javascript'},
                    {text: 'CSS', value: 'css'}
                ],
                codesample_dialog_width: 600,
                codesample_dialog_height: 400,
                codesample_line_numbers: true,
                codesample_global_prismjs: true
            });

    
        const _buttonLimpar = document.querySelector('.clear-btn');
        const _buttonSalvar = document.querySelector('.tosave-btn');
        const _result = document.querySelector('.result');

        _buttonLimpar.addEventListener('click', function(e){
            tinymce.activeEditor.setContent("");
        });
        
        _buttonSalvar.addEventListener('click', function(e){
            _data =  tinymce.get("editor").getContent();
            console.log(_data);   
            _result.innerHTML = _data;       
            Prism.highlightAll();
        });
      
    </script>
</body>
</html>